## 무엇이 문제일까?

로버트 C. 마틴은 <클린 소프트웨어>에서 모듈이 가져야 하는 세 가지 기능에 대해 설명 한다.

1. 목적은 실행 중에 제대로 동작해야한다.


3. 목적은 변경을 위해 존재하는 것이다. 대부분의 모듈은 생명주기 동안 변경되기 때문에
   간단한 작업만으로 변경이 가능해야한다.


3. 코드를 읽는 사람과 의사소통 하는 것이다. 모듈은 특별한 훈련없이도 개발자가 쉽게
   읽고 이해할 수 있어야 한다.

이 세 가지를 중점으로 코드를 고쳐나가 보자

### 예상을 빗나가는 코드

1. 관람객 입장에서 보면 관람객이 아닌 갑자기 제 3자인 소극장에서 가방을 열어본다.
   이는 말이 안되는 설계이다.


2. 판매원 입장이라면 소극장이 허락도 없이 보관 중인 티켓과 현금에 마음대로 접근할
   수 있다. 마찬가지로 판매원의 역할인데 소극장이 마음대로 할 수 있는 것이다.


이러한 코드들은 리펙토링을 거쳐 고쳐줘야한다.

### 변경에 취약한 코드

변경에 취약한 코드만큼 개발자를 두려움에 떨게하는 코드가 없을 것이다. 각 코드들은
서로 강하게 의존을 하고 있다. 그렇기 때문에 예를 들어 신용카드가 생긴다면? 관람객이
가방을 들고다니지 않은다면?

모든 코드를 뒤엎는 끔찍한 결과를 낳을 수 있다. 우리는 이러한 객체 간 의존성을
줄일 필요가 있다.

### 설계 다시하기

우리는 여기서 관람객과 판매원을 자율적인 존재로 만드는 작업을 할 것이다.

그렇다면 변경해보자