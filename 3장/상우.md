- 객체지향 패러다임의 관점에서 핵심은 역할, 책임, 협력이다.
- 클래스, 상속, 지연 바인딩은 구현 측면에 치우쳐 있기 때문에 객체지향 패러다임의 본질과는 거리가 멀다.
- 클래스와 상속은 객체들의 책임, 협력이 어느정도 자리를 잡은 후에 사용할 수 있는 구현 메커니즘 이다.

## 1. 협력

**협력**

- 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용을 협력이라고 한다.

**메시지 전송**

- 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다.
- 객체는 다른 객체의 상세한 내부 구현에 직접 접근할 수 없기 때문에 오직 메시지 전송을 통해서만 자신의 요청을 전달할 수 있다.
- 메시지를 수신한 객체는 메서드를 실행해 요청에 응답한다.

### 협력이 설계를 위한 문맥을 결정한다

- 객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력이다. 협력이 바뀌면 객체가 제공해야 하는 행동 역시 바뀌어야 한다.
    - 영화 예매 시스템(협력) 안에서 Movie 객체는 요금을 계산하는 행동을 한다.
    - 영화 상영 시스템협력) 안에서 Movie 객체는 영화를 재생하는 행동을 한다.
- **상태**는 객체가 **행동**하는 데 필요한 정보에 의해서, **행동**은 **협력** 안에서 객체가 처리할 메시지로 결정된다.

## 2. 책임

**책임**

- 객체가 협력에 참여하기 위해 수행하는 행동을 책임이라고 한다.
- 객체의 책임은 다음과 같이 나눠진다.
    - 하는 것
        - 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
        - 다른 객체의 행동을 시작시키는 것
        - 다른 객체의 활동을 제어하고 조절하는 것
    - 아는 것
        - 사적인 정보에 관해 아는 것
        - 관련된 객체에 관해 아는 것
        - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
- 객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 객체에게 할당하는 것이다.
- 객체의 구현 방법은 상대적으로 책임보다는 덜 중요하기 때문에 팩임을 결정한 다음에 고민하는 것이 좋다.

### 책임 할당

- 시스템이 사용자에게 제공하는 기능을 시스템이 담당할 하나의 책임으로 바라본다.
- 시스템의 책임을 완료하는 데 필요한 더 작은 책임을 찾아내고 이를 객체들에게 할당하는 반복적인 과정을 통해 모양을 갖춰간다.

**영화 예매 시스템**

- 시스템의 기능
    - 영화 예매

1. 예매하라. (협력에 필요한 메시지, 책임)
    - Screening (메시지에 적절한 객체)
2. 가격을 계산하라.
    - Movie
3. 할인 요금을 계산하라.
    - XXXX

이를 통해 시스템을 구성하는 객체들의 인터페이스와 오퍼레이션의 목록을 구할 수 있다.

### 책임 주도 설계

위처럼 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법을 **책임 주도 설계**라고 부른다.

1. 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
2. 시스템 책임을 더 작은 책임으로 분할한다.
3. 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
4. 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
5. 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.

### 메시지가 객체를 결정한다

객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택하게 해야 한다. 그 이유는

1. 객체가 최소한의 인터페이스를 가질 수 있게 된다.
    - 메시지가 식별될 때까지 객체의 퍼블릭 인터페이스에 어떤 것도 축하지 않기 때문에 적당한 크기를 가질 수 있다.
2. 객체는 충분히 추상적인 인터페이스를 가질 수 있게 된다.
    - 객체의 인터페이스는 어떻게(how)가 아닌 무엇(what)을 표현해야 한다.
    - 메시지는 외부의 객체가 요청하는 무언가를 의미하기 때문에 메시지를 먼저 식별하는 무엇을 수행할지에 초점을 맞추는 인터페이스를 얻을 수 있다.

### 행동이 상태를 결정한다

- 객체가 협력에 적합한지를 결정하는 것은 그 객체의 상태가 아니라 행동이다.
- 초보자들이 가장 많이 하는 실수는 객체의 행동이 아니라 상태에 초점을 맞추는 것이다.
    - 객체에 필요한 상태가 무엇인지 결정
    - 상태에 필요한 행동을 결정
- 위와 같은 방식은 객체의 내부 구현이 객체의 퍼블릭 인터페이스에 노출되도록 만들기 때문에 캡슐화를 저해한다.
- 이러한 개발 방식을 데이터 주도 설계라고 부른다.
- 상태는 단지 객체가 행동을 정상적으로 수행하기 위해 필요한 재료일뿐이다.

## 3. 역할

### 역할과 협력

**역할**

- 객체들이 협력 안에서 수행하는 책임들이 모인 것을 역할이라고 한다.

### 유연하고 재사용 가능한 협력

오브젝트 p87 ~ p89 참고

### 객체 대 역할

- 역할은 객체가 참여할 수 있는 일종의 슬롯이다.
- 협력에 적합한 책임을 수행하는 대상이 한 종류라면 간단하게 **객체**로 간주한다.
- 만약 여러 종류의 객체들이 참여할 수 있다면 **역할**이라고 부른다.
    - 할인정책(역할/추상 클래스) → ADiscountPolicy , BDiscountPolicy (구현체)
    - 할인조건(역할/인터페이스) → ADiscountCondition, ADiscountCondition(구현체)

**역할과 객체 선택**

- 다양한 객체들이 협력에 참여한다는 것이 확실하면 역할로 시작해라.
- 애매하면 구체적인 객체로 시작하라.

### 역할과 추상화

역할은 공통의 책임을 바탕으로 객체의 종류를 숨기기 때문에 **객체의 추상화**로 볼 수 있다. 따라서 장점도 동일하게 적용될 수 있다.

1. 세부 사항에 억눌리지 않고도 상위 수준의 정책을 쉽고 간단하게 표현할 수 있다.
    - ‘이런 저런 조건 ~~ 할인 정책은 ~~’이 아닌 ‘할인 정책과 여러 개의 할인 조건을 적용한다’로 줄여서 말할 수 있다.
2. 설계를 유연하게 만들 수 있다.
    - 다양한 종류의 객체를 끼워 넣을 수 있는 일종의 슬롯이기 때문에 유연하다.
